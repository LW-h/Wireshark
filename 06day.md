## 基础现实场景

> 介绍通过数据包层面实际分析，解决实际一些问题

#### 无法访问Internet:配置问题

> 常见:1.主机端点不接受DHCP分配的地址，是手动配置了地址信息，当默认网关地址配置出错时，DNS查询将不会被发往外网DNS域名服务器查询。

#### 无法访问Internet:意外重定向

> 阻止DNS查询的两个条件：  

+ 发起连接的设备在DNS缓存中已经有域名到IP地址的映射
+ 发起连接的设备在hosts文件中已经有域名到IP地址的映射

> 计算机通常都把hosts文件当作域名-IP地址配对的可信来源，并且会在查询外部来源之前检索它。Windows上的hosts文件位置：**C:\Windows\System32\drivers\hosts**;Linux上的hosts文件位置：**/etc/hosts**.

> 注意：恶意软件经常使用这种方法，可以把用户重定向到存放恶意代码的网站。

#### 无法访问Internet:上游问题

> 当能够向外界DNS服务器提交查询请求，所以网络内的工作站可以连接到外网。当连接外界服务时，外界服务器没有响应请求连接，连TCP RST数据包都没有发过来，可能有如下问题：

+ Web 服务器配置错误
+ Web 服务器的协议栈出错
+ 远程网络部署了数据包过滤设备(例如：防火墙、入侵防御）

